<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description"
            content="CPC New Haven Church - 135 Whitney Ave New Haven, CT. We are a church committed to serving and reaching the Greater New Haven area. Join us for worship and fellowship.">
        <meta name="keywords"
            content="CPC New Haven, Church, New Haven, CT, Worship, Fellowship">
        <meta name="author" content="CPC New Haven">
        <title>Events - CPC New Haven Church</title>
        <link rel="stylesheet" href="./src/css/global-body.css">
        <link rel="stylesheet" href="./src/css/events.css">
        <link rel="stylesheet" href="src/css/footer.css">

        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
        <link rel="stylesheet" href="./src/css/global-nav-bar.css">

    </head>
    <body>
        <header id="stickyHeader" class="sticky">
            <nav class="main-navigation">
                <a href="index.html">Home</a>
                <a href="index.html">Worship</a>
                <a href="about.html">About</a>
                <a href="podcasts.html">Podcasts</a>
                <a href="events.html">Events</a>
                <a href="announcements.html">Announcements</a>
                <a href="community.html">Community</a>
                <a href="live.html">Live</a>
                <a href="resources.html">Resources</a>
                <a href="give.html">Give</a>

            </nav>
        </header>
        <!-- MOBILE HAMBURGER-->
        <div class="hamburger-menu-button-container" id="hamburgerMenu">
            <i id="closeMobileMenuButton" class="fas fa-bars"></i>
        </div>

        <!-- Mobile Navigation -->
        <div class="mobile-navigation" id="mobileNavigation">
            <i id="closeMenuButton" class="fas fa-bars"></i>
            <!-- Exit button -->
            <img src="./assets/CPC_LOGO_24.png" id="mobile-menu-logo">
            <a class="mobile-menu-link" href="index.html">Home</a>
            <a class="mobile-menu-link" href="worship.html">Worship</a>
            <a class="mobile-menu-link" href="about.html">About</a>
            <a class="mobile-menu-link" href="podcasts.html">Podcasts</a>
            <a class="mobile-menu-link 
                href="events.html"><p class="main-nav-active">Events</p></a>
            <a class="mobile-menu-link"
                href="announcements.html">Announcements</a>
            <a class="mobile-menu-link" href="community.html">Community</a>
            <a class="mobile-menu-link" href="live.html">Live</a>
            <a class="mobile-menu-link" href="resources.html">Resources</a>
            <a class="mobile-menu-link" href="give.html">Give</a>
        </div>
        <div id="page-events" class="page">
            <div class="top-splash-welcome">
                <h1 class="headline">Events</h1>
            </div>
            <div class="submenu-container">
                <div class="submenu-menu">
                    <a href="#upcoming-event-list">Upcoming Events</a>
                    <a href="#event-calendar">Yearly Calendar</a>
                </div>
            </div>
            <section class="splash-image" id="home-image"></section>
            <!-- ... existing code ... -->

            <section id="upcoming-event-list" class="inner-page-section">
                <div class="center-content" style="margin-top: -150px;">
                    <h2>Upcoming Events</h2>
                    <h3>CPC Summer Schedule</h3>
                    <hr>
                    <table class="upcoming-event-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Event</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Wednesdays</td>
                                <td>Summer College Bible Study at 6pm</td>
                            </tr>
                            <tr>
                                <td>July 11, 18, 25</td>
                                <td>Thursday Picnics</td>
                            </tr>
                            <tr>
                                <td>Wednesdays</td>
                                <td>Serving with CPC in the Hill (Evenings)</td>
                            </tr>
                            <tr>
                                <td>July 28</td>
                                <td>Monthly Sunday Fellowship Lunch</td>
                            </tr>
                            <tr>
                                <td>July 14</td>
                                <td>Men's Lunch @ Noon</td>
                            </tr>
                            <tr>
                                <td>Sundays</td>
                                <td>Weekly Sunday Morning Prayer - 9:30AM in the
                                    Parlor</td>
                            </tr>
                          
                        </tbody>
                    </table>
                </div>
            </section>
            <div class="center-content">See more events on the <a
                    class="link-color-black"
                    href="./connect.html">Connect
                    Board</a></div>
            <section id="event-calendar" class="inner-page-section">
                <h2>Yearly Calendar</h2>
                <div id="calendar-container"></div>
                <div id="calendar-controls">
                    <button id="prev-month">Previous</button>
                    <span id="current-month"></span>
                    <button id="next-month">Next</button>
                </div>
            </section>

         
            
            </div>
        </div>

        <section id="footer-cta-a" class="styled-section-a">
            <div class="form-container">
              <h2>Subscribe to our Newsletter</h2>
              <form action="https://formspree.io/f/your_form_id" method="POST" class="neumorphic-form">
                <input type="email" name="email" placeholder="Your email" required>
                <button type="submit">Subscribe to CPC New Haven</button>
              </form>
              <p class="body-text">Stay Connected with the Latest and Greatest from CPC New Haven</p>
      
            </div>
          </section>

        <footer>
            <a id="fixedlink" target="_blank" rel="nofollow noopener"
                href="#">135 Whitney Ave - New Haven, CT | Sunday Worship
                10:30am </a>
        </footer>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
    var header = document.getElementById('myHeader');
	  var page = document.getElementById('page');
    var openMenuButton = document.getElementById('openmenu');

    window.addEventListener('scroll', function() {
				page.classList.remove('menuopen');
        if (window.scrollY >= 100) {
            header.classList.add('sticky');
        } else {
            header.classList.remove('sticky');
        }
    });

    // Event listener to remove the sticky class when the button is clicked
    openMenuButton.addEventListener('click', function() {
        header.classList.remove('sticky');
				page.classList.add('menuopen');
    });
	
	var links = document.querySelectorAll('a[href^="#"]');

    links.forEach(function(link) {
        link.addEventListener('click', function(event) {
            // Prevent the default action
            event.preventDefault();

            // Get the target element
            var targetId = this.getAttribute('href');
            var targetElement = document.querySelector(targetId);

            // Smooth scroll to target
            if (targetElement) {
                targetElement.scrollIntoView({
                    behavior: 'smooth'
                });
            }
        });
    });
});

    </script>
        <script src="./src/fetch-events.js"></script>
        <script src="./src/js/background-fetch-splash-image.js"></script>
        <script src="./src/js/function_toggle_mobileMenu.js"></script>

        <script>
            document.addEventListener('DOMContentLoaded', function() {
                let currentDate = new Date();

                // Fetch events and render calendar
                fetch('./data/events.json')
                    .then(response => response.json())
                    .then(data => {
                        renderCalendar(data.events, currentDate);
                    });

                function renderCalendar(events, date) {
                    const calendarContainer = document.getElementById('calendar-container');
                    const currentMonthElement = document.getElementById('current-month');
                    const month = date.getMonth();
                    const year = date.getFullYear();
                    const months = [
                        'January', 'February', 'March', 'April', 'May', 'June',
                        'July', 'August', 'September', 'October', 'November', 'December'
                    ];

                    calendarContainer.innerHTML = ''; // Clear previous calendar
                    currentMonthElement.textContent = `${months[month]} ${year}`;

                    const monthDiv = document.createElement('div');
                    monthDiv.classList.add('calendar-month');
                    monthDiv.innerHTML = `<h3>${months[month]}</h3>`;
                    const daysDiv = document.createElement('div');
                    daysDiv.classList.add('calendar-days');

                    // Get events for the current month
                    const monthEvents = events.filter(event => {
                        const eventDate = new Date(event.date + ' ' + year);
                        return eventDate.getMonth() === month && eventDate.getFullYear() === year;
                    });

                    // Render days and events
                    const daysInMonth = new Date(year, month + 1, 0).getDate();
                    for (let day = 1; day <= daysInMonth; day++) {
                        const dayDiv = document.createElement('div');
                        dayDiv.classList.add('calendar-day');
                        dayDiv.innerHTML = `<span>${day}</span>`;

                        // Add events to the day
                        monthEvents.forEach(event => {
                            const eventDate = new Date(event.date + ' ' + year);
                            if (eventDate.getDate() === day) {
                                const eventDiv = document.createElement('div');
                                eventDiv.classList.add('calendar-event');
                                eventDiv.textContent = event.description;
                                dayDiv.appendChild(eventDiv);
                            }
                        });

                        daysDiv.appendChild(dayDiv);
                    }

                    monthDiv.appendChild(daysDiv);
                    calendarContainer.appendChild(monthDiv);
                }

                document.getElementById('prev-month').addEventListener('click', function() {
                    currentDate.setMonth(currentDate.getMonth() - 1);
                    fetch('./data/events.json')
                        .then(response => response.json())
                        .then(data => {
                            renderCalendar(data.events, currentDate);
                        });
                });

                document.getElementById('next-month').addEventListener('click', function() {
                    currentDate.setMonth(currentDate.getMonth() + 1);
                    fetch('./data/events.json')
                        .then(response => response.json())
                        .then(data => {
                            renderCalendar(data.events, currentDate);
                        });
                });
            });
        </script>
    </body>
</html>