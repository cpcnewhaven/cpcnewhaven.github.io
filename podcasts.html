<!DOCTYPE html>
<html lang="en">
    <head>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description"
            content="CPC New Haven Church - 135 Whitney Ave New Haven, CT. We are a church committed to serving and reaching the Greater New Haven area. Join us for worship and fellowship.">
        <meta name="keywords"
            content="CPC New Haven, Church, New Haven, CT, Worship, Fellowship">
        <meta name="author" content="CPC New Haven">
        <title>Live - CPC New Haven Church</title>
        <link rel="stylesheet" href="./css/podcasts.css">
        <link rel="stylesheet" href="./src/css/global-nav-bar.css">
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    </head>
    <body>
        <div id="give">
            <a href="./give.html">Give</a>
        </div>
        <header id="stickyHeader" class="sticky">
            <nav class="main-navigation">
                <a href="index.html">Home</a>
                <a href="worship.html">Worship</a>
                <a href="about.html">About</a>
                <a href="podcasts.html">Podcasts</a>
                <a href="events.html">Events</a>
                <a href="announcements.html">Announcements</a>
                <a href="community.html">Community</a>
                <a href="live.html">Live</a>
                <a href="resources.html">Resources</a>

            </nav>
        </header>

        <!-- Inside <header> or <nav> -->
        <div class="hamburger-menu" id="hamburgerMenu">
            <div></div>
            <div></div>
            <div></div>
        </div>

        <!-- Mobile Navigation -->
        <div class="mobile-navigation" id="mobileNavigation">
            <a href="index.html">Home</a>
            <a href="worship.html">Worship</a>
            <a href="about.html">About</a>
            <a href="podcasts.html">Podcasts</a>
            <a href="events.html">Events</a>
            <a href="announcements.html">Announcements</a>
            <a href="community.html">Community</a>
            <a href="live.html">Live</a>
            <a href="resources.html">Resources</a>
            <button id="closeMenuButton">Close</button> <!-- Exit button -->

        </div>
        <div id="page-podcast">
            <section id="podcast-table">
                <h1>Podcasts</h1>
                <table>

                </table>

            </section>

        </div>

        <h1>Podcast Pre-April 2024</h1>

        <div id="old-podcast-container"></div>

        <a id="fixedlink" target="_blank" rel="nofollow noopener" href="#">135
            Whitney Ave - New Haven, CT | Sunday Worship 10:30am </a>
        <script>
document.addEventListener('DOMContentLoaded', function() {
    fetch('data/podcast/total-podcast.json')
        .then(response => response.json())
        .then(podcastsData => {
            const table = document.querySelector('#podcast-table table');
            let tableHTML = `<tr>
                <th>Cover</th>
                <th>Title</th>
                <th>Link</th>
            </tr>`;

            podcastsData.forEach(podcast => {
                tableHTML += `<tr>
                    <td><img src="${podcast.artwork}" alt="Podcast Cover" style="width:100px;"></td>
                    <td>
                        <div class="podcast-title">${podcast.title}</div>
                    </td>
                    <td><a href="${podcast.episodeLink}" class="podcast-link" target="_blank">Listen</a></td>
                </tr>`;
            });

            table.innerHTML = tableHTML;
        })
        .catch(error => console.error('Error loading podcast data:', error));
});
</script>

        <script>
document.addEventListener('DOMContentLoaded', function() {
    // Fetch the CSV file
    fetch('data/podcast/preAprilPodcast.csv')
        .then(response => response.text())
        .then(csvData => {
            // Parse the CSV data
            Papa.parse(csvData, {
                header: true,
                complete: function(results) {
                    const episodes = results.data;
                    const container = document.getElementById('old-podcast-container');

                    // Create a table element
                    const table = document.createElement('table');
                    table.id = 'preAprilPodcastTable'; // Unique ID for the table

                    // Table header
                    let tableHTML = `<tr>
                        <th>Cover</th>
                        <th>Title</th>
                        <th>Link</th>
                    </tr>`;

                    // Populate the table with episodes data
                    episodes.forEach(episode => {
                        tableHTML += `<tr>
                            <td><img src="${episode['Cover']}" alt="Podcast Cover" style="width:100px;"></td>
                            <td>${episode['Name']}</td>
                            <td><a href="${episode['Episode Link']}" class="preAprilPodcastLink" target="_blank">Listen</a></td>
                        </tr>`;
                    });

                    // Set the innerHTML of the table
                    table.innerHTML = tableHTML;

                    // Append the table to the container
                    container.appendChild(table);
                }
            });
        })
        .catch(error => console.error('Error loading podcast data:', error));
});
</script>

    </body>
</html>
